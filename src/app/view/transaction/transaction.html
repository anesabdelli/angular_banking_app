<form (submit)="onSubmit($event)" class="w-100" style="max-width: 500px; margin: auto;">

  <!-- Emitter Account ID -->
  <div class="mb-3 hidden">
    <label class="form-label fw-bold">Emitter Account ID</label>
    <input type="text"
           class="form-control"
           [field]="transactionForm.emitterAccountId"
           [class.is-invalid]="transactionForm.emitterAccountId().errors().length > 0 && transactionForm.emitterAccountId().touched()" />
    <div class="invalid-feedback" *ngIf="transactionForm.emitterAccountId().errors().length > 0 && transactionForm.emitterAccountId().touched()">
      <span *ngFor="let error of transactionForm.emitterAccountId().errors()">{{ error.message }}</span>
    </div>
  </div>

  <!-- Receiver Account ID -->
  <div class="mb-3">
    <label class="form-label fw-bold">Receiver Account ID</label>
    <input type="text"
           class="form-control"
           [field]="transactionForm.receiverAccountId"
           [class.is-invalid]="transactionForm.receiverAccountId().errors().length > 0 && transactionForm.receiverAccountId().touched()" />
    <div class="invalid-feedback" *ngIf="transactionForm.receiverAccountId().errors().length > 0 && transactionForm.receiverAccountId().touched()">
      <span *ngFor="let error of transactionForm.receiverAccountId().errors()">{{ error.message }}</span>
    </div>
  </div>

  <!-- Amount -->
  <div class="mb-3">
    <label class="form-label fw-bold">Amount (€)</label>
    <input type="number"
           class="form-control"
           [field]="transactionForm.amount"
           [class.is-invalid]="transactionForm.amount().errors().length > 0 && transactionForm.amount().touched()" />
    <div class="invalid-feedback" *ngIf="transactionForm.amount().errors().length > 0 && transactionForm.amount().touched()">
      <span *ngFor="let error of transactionForm.amount().errors()">{{ error.message }}</span>
    </div>
  </div>

  <!-- Description -->
  <div class="mb-3">
    <label class="form-label fw-bold">Description</label>
    <input type="text"
           class="form-control"
           [field]="transactionForm.description"
           [class.is-invalid]="transactionForm.description().errors().length > 0 && transactionForm.description().touched()" />
    <div class="invalid-feedback" *ngIf="transactionForm.description().errors().length > 0 && transactionForm.description().touched()">
      <span *ngFor="let error of transactionForm.description().errors()">{{ error.message }}</span>
    </div>
  </div>

  <!-- Résultat transaction -->
  <div *ngIf="transactionResult()" class="alert alert-success">
    <p><strong>Statut :</strong> {{ transactionResult()!.status }}</p>
    <p>
      Le virement de <strong>{{ transactionResult()!.amount }} €</strong>
      a bien été effectué à <strong>{{ transactionResult()!.receiver.owner.name }}</strong>
      le <strong>{{ transactionResult()!.emittedAt | date:'dd/MM/yyyy à HH:mm' }}</strong>.
    </p>
  </div>

  <!-- Erreur backend -->
  <div *ngIf="transactionError()" class="alert alert-danger">
    {{ transactionError() }}
  </div>

  <!-- Bouton submit -->
  <button type="submit"
          class="btn btn-primary w-100"
          [disabled]="transactionForm().errors().length > 0 || isLoading()">
    {{ isLoading() ? 'Virement...' : 'Émettre le virement' }}
  </button>

</form>
